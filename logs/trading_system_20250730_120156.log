2025-07-30 12:01:56 - __main__ - INFO - ================================================================================
2025-07-30 12:01:56 - __main__ - INFO - 🚀 ENHANCED MULTI-ACCOUNT TRADING SYSTEM STARTING
2025-07-30 12:01:56 - __main__ - INFO - ================================================================================
2025-07-30 12:01:56 - __main__ - INFO - 📝 Logging to: logs\trading_system_20250730_120156.log
2025-07-30 12:01:56 - __main__ - INFO - ⏰ Started at: 2025-07-30 12:01:56
2025-07-30 12:01:56 - __main__ - INFO - 🔧 Initializing system components...
2025-07-30 12:01:56 - __main__ - DEBUG - Loading PersonalTradingConfig...
2025-07-30 12:01:56 - __main__ - INFO - ✅ Configuration loaded
2025-07-30 12:01:56 - __main__ - DEBUG - Initializing Webull client...
2025-07-30 12:01:56 - __main__ - INFO - ✅ Webull client initialized
2025-07-30 12:01:56 - __main__ - DEBUG - Initializing authentication components...
2025-07-30 12:01:56 - __main__ - INFO - ✅ Authentication components initialized
2025-07-30 12:01:56 - __main__ - DEBUG - Initializing account manager...
2025-07-30 12:01:56 - __main__ - INFO - ✅ Account manager initialized
2025-07-30 12:01:56 - __main__ - INFO - 🎯 All system components initialized successfully
2025-07-30 12:01:56 - __main__ - INFO - 🚀 Starting Enhanced Multi-Account Trading System Workflow
2025-07-30 12:01:56 - __main__ - INFO - ================================================================================
2025-07-30 12:01:56 - __main__ - INFO - 🔐 Step 1: Authentication Process Starting
2025-07-30 12:01:56 - __main__ - INFO - ------------------------------------------------------------
2025-07-30 12:01:56 - __main__ - INFO - Credentials loaded successfully
2025-07-30 12:01:56 - __main__ - INFO - ✅ Setting DID from credentials: by37wmct...lwb9ermo
2025-07-30 12:01:56 - __main__ - DEBUG - ✅ did.bin file updated
2025-07-30 12:01:56 - __main__ - INFO - 🔍 Checking for existing session...
2025-07-30 12:01:56 - __main__ - DEBUG - Loaded session data with keys: ['access_token', 'refresh_token', 'token_expire', 'uuid', 'account_id', 'trade_token', 'zone_var', 'saved_at']
2025-07-30 12:01:56 - __main__ - INFO - Session loaded successfully
2025-07-30 12:01:56 - __main__ - DEBUG - Set zone_var to: dc_core1
2025-07-30 12:01:56 - __main__ - DEBUG - Set account_id to: 21984998
2025-07-30 12:01:56 - __main__ - DEBUG - Attempting to re-initialize account context...
2025-07-30 12:01:56 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): tradeapi.webullbroker.com:443
2025-07-30 12:01:57 - urllib3.connectionpool - DEBUG - https://tradeapi.webullbroker.com:443 "GET /api/trade/account/getSecAccountList/v5 HTTP/1.1" 200 None
2025-07-30 12:01:58 - __main__ - WARNING - API response missing expected field 'rzone' - session likely expired
2025-07-30 12:01:58 - __main__ - INFO - Clearing invalid session file
2025-07-30 12:01:58 - __main__ - INFO - Session file deleted
2025-07-30 12:01:58 - __main__ - INFO - Session refresh disabled - will require fresh login
2025-07-30 12:01:58 - __main__ - INFO - No valid session found - new login required
2025-07-30 12:01:58 - __main__ - INFO - ℹ️ No valid existing session found
2025-07-30 12:01:58 - __main__ - INFO - 🔑 Login attempt 1/3
2025-07-30 12:01:58 - __main__ - INFO - Starting automated login attempt 1/3...
2025-07-30 12:01:58 - __main__ - INFO - Credentials loaded successfully
2025-07-30 12:01:58 - __main__ - INFO - DID set from stored credentials
2025-07-30 12:01:58 - __main__ - INFO - Attempting Webull login...
2025-07-30 12:01:58 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): u1suser.webullfintech.com:443
2025-07-30 12:01:58 - urllib3.connectionpool - DEBUG - https://u1suser.webullfintech.com:443 "POST /api/user/v1/login/account/v2 HTTP/1.1" 200 None
2025-07-30 12:01:58 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): tradeapi.webullbroker.com:443
2025-07-30 12:01:58 - urllib3.connectionpool - DEBUG - https://tradeapi.webullbroker.com:443 "GET /api/trade/account/getSecAccountList/v5 HTTP/1.1" 200 None
2025-07-30 12:01:58 - __main__ - INFO - ✅ Webull login successful
2025-07-30 12:01:58 - __main__ - INFO - Getting trade token (attempt 1/3)...
2025-07-30 12:01:58 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): trade.webullfintech.com:443
2025-07-30 12:01:59 - urllib3.connectionpool - DEBUG - https://trade.webullfintech.com:443 "POST /api/trading/v1/global/trade/login HTTP/1.1" 200 None
2025-07-30 12:01:59 - __main__ - INFO - ✅ Trade token obtained successfully
2025-07-30 12:01:59 - __main__ - INFO - ✅ Complete login process successful
2025-07-30 12:01:59 - __main__ - INFO - ✅ Fresh authentication successful!
2025-07-30 12:01:59 - __main__ - INFO - 💾 Saving session for future use...
2025-07-30 12:01:59 - __main__ - INFO - Session saved to webull_session.json
2025-07-30 12:01:59 - __main__ - INFO - ✅ Session saved successfully
2025-07-30 12:01:59 - __main__ - INFO - 🔍 Step 2: Account Discovery Process Starting
2025-07-30 12:01:59 - __main__ - INFO - ------------------------------------------------------------
2025-07-30 12:01:59 - __main__ - INFO - 🔍 Discovering all available accounts...
2025-07-30 12:01:59 - __main__ - DEBUG - 🔍 Discovering Webull accounts automatically...
2025-07-30 12:01:59 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): tradeapi.webullbroker.com:443
2025-07-30 12:01:59 - urllib3.connectionpool - DEBUG - https://tradeapi.webullbroker.com:443 "GET /api/trade/account/getSecAccountList/v5 HTTP/1.1" 200 None
2025-07-30 12:01:59 - __main__ - DEBUG - Account discovery API response keys: ['success', 'data']
2025-07-30 12:01:59 - __main__ - INFO - 📊 Found 4 account(s) from Webull API
2025-07-30 12:01:59 - __main__ - DEBUG - Processing account 1: 21984998
2025-07-30 12:01:59 - __main__ - DEBUG -    Account ID: 21984998
2025-07-30 12:01:59 - __main__ - DEBUG -    Status: active
2025-07-30 12:01:59 - __main__ - DEBUG -    RZone: dc_core1
2025-07-30 12:01:59 - __main__ - DEBUG -    Account type from accountTypes: CASH -> Cash Account
2025-07-30 12:01:59 - __main__ - DEBUG -    Determined account type: Cash Account
2025-07-30 12:01:59 - __main__ - DEBUG - Loading details for account 21984998 (Cash Account)
2025-07-30 12:01:59 - __main__ - DEBUG -    Set wb._account_id to: 21984998
2025-07-30 12:01:59 - __main__ - DEBUG -    Set wb.zone_var to: dc_core1
2025-07-30 12:01:59 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): tradeapi.webullbroker.com:443
2025-07-30 12:01:59 - urllib3.connectionpool - DEBUG - https://tradeapi.webullbroker.com:443 "GET /api/trade/v3/home/21984998 HTTP/1.1" 200 None
2025-07-30 12:01:59 - __main__ - DEBUG -    Account data keys: ['banners', 'secAccountId', 'brokerId', 'accountType', 'brokerAccountId', 'currency', 'currencyId', 'pdt', 'professional', 'showUpgrade', 'totalCost', 'netLiquidation', 'unrealizedProfitLoss', 'unrealizedProfitLossRate', 'unrealizedProfitLossBase', 'warning', 'remindModifyPwd', 'accountMembers', 'positions', 'openOrders', 'positions2', 'openOrders2', 'openIpoOrders', 'openOrderSize']
2025-07-30 12:01:59 - __main__ - DEBUG - 💰 Found top-level netLiquidation: $123.22
2025-07-30 12:01:59 - __main__ - DEBUG - 💵 Using cashBalance as fallback: $123.22
2025-07-30 12:01:59 - __main__ - DEBUG - 💵 Found settledFunds (cash): $123.22
2025-07-30 12:01:59 - __main__ - DEBUG -    Day trades remaining: Unlimited (set to 999)
2025-07-30 12:01:59 - __main__ - DEBUG - 📊 Day Trading Info for Cash Account:
2025-07-30 12:01:59 - __main__ - DEBUG -    PDT Status: False
2025-07-30 12:01:59 - __main__ - DEBUG -    Day Trades Remaining: 999
2025-07-30 12:01:59 - __main__ - DEBUG - 📊 Final values for Cash Account:
2025-07-30 12:01:59 - __main__ - DEBUG -    Net Liquidation: $123.22
2025-07-30 12:01:59 - __main__ - DEBUG -    Available Funds: $123.22
2025-07-30 12:01:59 - __main__ - DEBUG -    Positions: 0
2025-07-30 12:01:59 - __main__ - DEBUG - ✅ Cash Account Account loaded: $123.22
2025-07-30 12:01:59 - __main__ - DEBUG - Processing account 2: 11026319
2025-07-30 12:01:59 - __main__ - DEBUG -    Account ID: 11026319
2025-07-30 12:01:59 - __main__ - DEBUG -    Status: active
2025-07-30 12:01:59 - __main__ - DEBUG -    RZone: dc_core1
2025-07-30 12:01:59 - __main__ - DEBUG -    Account type from accountTypes: MRGN -> Margin Account
2025-07-30 12:01:59 - __main__ - DEBUG -    Determined account type: Margin Account
2025-07-30 12:01:59 - __main__ - DEBUG - Loading details for account 11026319 (Margin Account)
2025-07-30 12:01:59 - __main__ - DEBUG -    Set wb._account_id to: 11026319
2025-07-30 12:01:59 - __main__ - DEBUG -    Set wb.zone_var to: dc_core1
2025-07-30 12:01:59 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): tradeapi.webullbroker.com:443
2025-07-30 12:01:59 - urllib3.connectionpool - DEBUG - https://tradeapi.webullbroker.com:443 "GET /api/trade/v3/home/11026319 HTTP/1.1" 200 None
2025-07-30 12:01:59 - __main__ - DEBUG -    Account data keys: ['banners', 'secAccountId', 'brokerId', 'accountType', 'brokerAccountId', 'currency', 'currencyId', 'pdt', 'professional', 'showUpgrade', 'totalCost', 'netLiquidation', 'unrealizedProfitLoss', 'unrealizedProfitLossRate', 'unrealizedProfitLossBase', 'warning', 'remindModifyPwd', 'accountMembers', 'positions', 'openOrders', 'positions2', 'openOrders2', 'openIpoOrders', 'openOrderSize']
2025-07-30 12:01:59 - __main__ - DEBUG - 💰 Found top-level netLiquidation: $127.55
2025-07-30 12:01:59 - __main__ - DEBUG - 💵 Found cashBalance (margin): $127.55
2025-07-30 12:01:59 - __main__ - DEBUG -    Day trades remaining: 2 (from 2,2,3,3,3)
2025-07-30 12:01:59 - __main__ - DEBUG - 📊 Day Trading Info for Margin Account:
2025-07-30 12:01:59 - __main__ - DEBUG -    PDT Status: False
2025-07-30 12:01:59 - __main__ - DEBUG -    Day Trades Remaining: 2
2025-07-30 12:01:59 - __main__ - DEBUG - 📊 Final values for Margin Account:
2025-07-30 12:01:59 - __main__ - DEBUG -    Net Liquidation: $127.55
2025-07-30 12:01:59 - __main__ - DEBUG -    Available Funds: $127.55
2025-07-30 12:01:59 - __main__ - DEBUG -    Positions: 0
2025-07-30 12:01:59 - __main__ - DEBUG - ✅ Margin Account Account loaded: $127.55
2025-07-30 12:01:59 - __main__ - DEBUG - Processing account 3: Unknown ID
2025-07-30 12:01:59 - __main__ - DEBUG -    Account ID: None
2025-07-30 12:01:59 - __main__ - DEBUG -    Status: unopen
2025-07-30 12:01:59 - __main__ - DEBUG -    RZone: dc_core1
2025-07-30 12:01:59 - __main__ - DEBUG - ⏭️ Skipping unopen account: IRA
2025-07-30 12:01:59 - __main__ - DEBUG - Processing account 4: Unknown ID
2025-07-30 12:01:59 - __main__ - DEBUG -    Account ID: None
2025-07-30 12:01:59 - __main__ - DEBUG -    Status: unopen
2025-07-30 12:01:59 - __main__ - DEBUG -    RZone: dc_core1
2025-07-30 12:01:59 - __main__ - DEBUG - ⏭️ Skipping unopen account: Advisor
2025-07-30 12:01:59 - __main__ - INFO - ✅ Successfully discovered 2 active accounts
2025-07-30 12:01:59 - __main__ - INFO - ✅ Account discovery completed successfully
2025-07-30 12:01:59 - __main__ - DEBUG - ✅ Account enabled for trading: Cash Account ($123.22)
2025-07-30 12:01:59 - __main__ - DEBUG - ✅ Account enabled for trading: Margin Account ($127.55)
2025-07-30 12:01:59 - __main__ - INFO - 📊 Account Discovery Summary:
2025-07-30 12:01:59 - __main__ - INFO -    Total Accounts Found: 2
2025-07-30 12:01:59 - __main__ - INFO -    Enabled for Trading: 2
2025-07-30 12:01:59 - __main__ - INFO -    Total Portfolio Value: $250.77
2025-07-30 12:01:59 - __main__ - INFO -    Total Available Cash: $250.77
2025-07-30 12:01:59 - __main__ - INFO -    Total Positions: 0
2025-07-30 12:01:59 - __main__ - INFO - 
📋 Detailed Account Information:
2025-07-30 12:01:59 - __main__ - INFO -    Account 1:
2025-07-30 12:01:59 - __main__ - INFO -       Type: Cash Account
2025-07-30 12:01:59 - __main__ - INFO -       ID: 21984998
2025-07-30 12:01:59 - __main__ - INFO -       Enabled: ✅ Yes
2025-07-30 12:01:59 - __main__ - INFO -       Net Liquidation: $123.22
2025-07-30 12:01:59 - __main__ - INFO -       Available Funds: $123.22
2025-07-30 12:01:59 - __main__ - INFO -       Positions: 0
2025-07-30 12:01:59 - __main__ - INFO -       Day Trading: ✅ Enabled
2025-07-30 12:01:59 - __main__ - INFO -       Options Trading: ✅ Enabled
2025-07-30 12:01:59 - __main__ - INFO - 
2025-07-30 12:01:59 - __main__ - INFO -    Account 2:
2025-07-30 12:01:59 - __main__ - INFO -       Type: Margin Account
2025-07-30 12:01:59 - __main__ - INFO -       ID: 11026319
2025-07-30 12:01:59 - __main__ - INFO -       Enabled: ✅ Yes
2025-07-30 12:01:59 - __main__ - INFO -       Net Liquidation: $127.55
2025-07-30 12:01:59 - __main__ - INFO -       Available Funds: $127.55
2025-07-30 12:01:59 - __main__ - INFO -       Positions: 0
2025-07-30 12:01:59 - __main__ - INFO -       Day Trading: ✅ Enabled
2025-07-30 12:01:59 - __main__ - INFO -       Options Trading: ✅ Enabled
2025-07-30 12:01:59 - __main__ - DEBUG - ✅ Account enabled for trading: Cash Account ($123.22)
2025-07-30 12:01:59 - __main__ - DEBUG - ✅ Account enabled for trading: Margin Account ($127.55)
2025-07-30 12:01:59 - __main__ - INFO - 🎯 Accounts Enabled for Trading:
2025-07-30 12:01:59 - __main__ - INFO -    ✅ Cash Account: $123.22 available
2025-07-30 12:01:59 - __main__ - INFO -    ✅ Margin Account: $127.55 available
2025-07-30 12:01:59 - __main__ - INFO - 📊 Step 3: System Status Report
2025-07-30 12:01:59 - __main__ - INFO - ------------------------------------------------------------
2025-07-30 12:01:59 - __main__ - INFO - 🔐 Authentication Status:
2025-07-30 12:01:59 - __main__ - INFO -    Logged In: ✅ Yes
2025-07-30 12:01:59 - __main__ - INFO -    Access Token: ✅ Present
2025-07-30 12:01:59 - __main__ - INFO -    Trade Token: ✅ Present
2025-07-30 12:01:59 - __main__ - INFO -    Account ID: 11026319
2025-07-30 12:01:59 - __main__ - INFO - 💾 Session Status:
2025-07-30 12:01:59 - __main__ - INFO -    Session Exists: ✅ Yes
2025-07-30 12:01:59 - __main__ - INFO -    Saved At: 2025-07-30T12:01:59.312719
2025-07-30 12:01:59 - __main__ - INFO -    Expires In: 10079 minutes
2025-07-30 12:01:59 - __main__ - INFO - ⚙️ Configuration Status:
2025-07-30 12:01:59 - __main__ - INFO -    Config Loaded: ✅ Yes
2025-07-30 12:01:59 - __main__ - INFO -    Database Path: trading_data.db
2025-07-30 12:01:59 - __main__ - INFO - 👥 Account Manager Status:
2025-07-30 12:01:59 - __main__ - INFO -    Accounts Loaded: 2
2025-07-30 12:01:59 - __main__ - INFO -    Current Account: None
2025-07-30 12:01:59 - __main__ - INFO - ================================================================================
2025-07-30 12:01:59 - __main__ - INFO - 🎉 SYSTEM INITIALIZATION COMPLETED SUCCESSFULLY!
2025-07-30 12:01:59 - __main__ - INFO - ================================================================================
2025-07-30 12:01:59 - __main__ - INFO - ✅ Authentication: Complete
2025-07-30 12:01:59 - __main__ - INFO - ✅ Account Discovery: Complete
2025-07-30 12:01:59 - __main__ - INFO - ✅ System Status: Logged
2025-07-30 12:01:59 - __main__ - INFO - 🚀 System is ready for trading operations
2025-07-30 12:01:59 - __main__ - INFO - ================================================================================
2025-07-30 12:01:59 - __main__ - INFO - ⏰ System workflow completed at: 2025-07-30 12:01:59
2025-07-30 12:01:59 - __main__ - INFO - ================================================================================
2025-07-30 12:01:59 - __main__ - INFO - 🧹 Cleaning up system resources...
2025-07-30 12:01:59 - __main__ - DEBUG - ✅ Restored to original account context
2025-07-30 12:01:59 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): u1suser.webullfintech.com:443
2025-07-30 12:01:59 - urllib3.connectionpool - DEBUG - https://u1suser.webullfintech.com:443 "GET /api/user/v1/logout HTTP/1.1" 200 0
2025-07-30 12:01:59 - __main__ - INFO - 🔐 Logged out successfully
2025-07-30 12:01:59 - __main__ - INFO - ✅ Cleanup completed
